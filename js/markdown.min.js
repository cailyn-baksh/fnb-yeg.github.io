function p(e,l){let t=[],s="";for(const n of e)0!==s.length&&s.length%l==0?(t.push(s),s=n):s+=n;return t.push(s),t}function h(e){var l='#*_~`^-—![]()"|:>.)\n';let t=[],s="",n=!1;for(const h of e){var i=s[s.length-1]??"";n?(""!==s&&(t.push(s),s=""),t.push(`&#${h.charCodeAt(0)};`),n=!1):"\\"===h?n=!0:""===s?s=h:l.includes(h)?i===h?s+=h:(t.push(s),s=h):l.includes(i)?(t.push(s),s=h):s+=h}return t.push(s),t}function m(t){if(t.length<3)return null;let s={src:null,alt:null,title:null,offset:0};if("["===t[s.offset]){let e="";for(++s.offset;s.offset<t.length;++s.offset){if("]"===t[s.offset]){s.alt=e;break}e+=t[s.offset]}if(null===s.alt)return null}if(++s.offset,s.offset>t.length)return s;if("("===t[s.offset]){let e=0,l="";for(++s.offset;2!==e&&s.offset<t.length;++s.offset){if(")"===t[s.offset]){0===e&&(s.src=l),e=2;break}if('"'===t[s.offset]){if(0===e){s.src=l,l="",e=1;continue}1===e&&(s.title=l,e=2)}l+=t[s.offset]}}return s}function y(l){if("|"!==l[0])return null;let t=[],s=-1;for(let e=1;e<l.length;++e)if(":"===l[e])-1===s?s=2:++s;else if("-"===l[e][0])-1===s&&(s=0);else{if("|"!==l[e])return null;if(-1===s)return null;switch(s){case 0:t.push("md-table-align-center");break;case 1:t.push("md-table-align-right");break;case 2:t.push("md-table-align-left");break;case 3:t.push("md-table-align-justify")}s=-1}return t}function a(l,t){for(let e=l.length-1;0<=e;--e)if(l[e]===t)return e;return-1}function C(n){let i=[];var e,l,h,r,u=e=>{var l=i.slice(e).join("");i.splice(e,i.length,l)};for(let s=0;s<n.length;++s){let t=n[s];if(t.startsWith("*")){let l;if(2<t.length){let e=p(t,2);var c=a(i,e[0]),f=a(i,e[e.length-1]);l=c<f?(e.reverse(),f):c,n.splice(s,1,...e),t=n[s]}else l=a(i,t);-1!==l?(2===t.length?(i[l]="<b>",i.push("</b>")):(i[l]="<i>",i.push("</i>")),u(l)):i.push(t)}else if(t.startsWith("_")){let l;if(2<t.length){let e=p(t,2);f=a(i,e[0]),c=a(i,e[e.length-1]);l=f<c?(e.reverse(),c):f,n.splice(s,1,...e),t=n[s]}else l=a(i,t);-1!==l?(2===t.length?(i[l]="<u>",i.push("</u>")):(i[l]="<sub>",i.push("</sub>")),u(l)):i.push(t)}else t.startsWith("~~")?(2<t.length&&(n.splice(s,1,...p(t,2)),t=n[s]),-1!==(e=a(i,t))?(i[e]="<s>",i.push("</s>"),u(e)):i.push(t)):t.startsWith("`")?(1<t.length&&(n.splice(s,1,...p(t,1)),t=n[s]),-1!==(e=a(i,t))?(i[e]="<code>",i.push("</code>"),u(e)):i.push(t)):t.startsWith("^")?(1<t.length&&(n.splice(s,1,...p(t,1)),t=n[s]),-1!==(l=a(i,t))?(i[l]="<sup>",i.push("</sup>"),u(l)):i.push(t)):"]"===t||")"===t?(i.push(t),"]"===t&&s+1<n.length&&"("===n[s+1]||(-1===(l=a(i,"["))||0!==l&&"!"===i[l-1]||null===(h=m(i.slice(l)))||null===h.src&&null===h.alt||(r=`<a href="${h.src||h.alt}" title="${h.title??h.src??h.alt}">${h.alt}</a>`,i.splice(l,h.offset+1,r)))):i.push(t)}return i}function r(h){let r=[],u=[],c=-1;var f=e=>{let l=0;for(;0<u.length;)r.splice(e,0,`</${u.pop()}>`),++l;return l},p=e=>{var l=r.slice(e).join("");r.splice(e,r.length,l)};let a;for(let i=0;i<h.length;++i){let e=h[i];if(e.startsWith("\n")){if(0!==r.length){let l=(()=>{for(let e=r.length-1;0<=e;--e)if(r[e].includes("\n"))return e;return-1})(),t=0,n=null;for(let e=l+1;e<r.length;++e){if(!r[e].split("").every(e=>" \t".includes(e))){n=e;break}t+=r[e].length}let s=r[n];if(null!==s&&void 0!==s){if(s.startsWith("#")){n+=f(n);var o=s.length<=6?s.length:6,o=(r[n]=`<h${o}>`,r.push(`</h${o}>`),C(r.slice(n)));r.splice(n,r.length,...o),p(l+1)}else if("!"===s){if(r.length-l<5)continue;n+=f(n);o=m(r.slice(n+1));if(null===o.src||null===o.alt)continue;var g=`<img src="${o.src}" alt="${o.alt}" title="${o.title??o.alt}" />`;r.splice(n,o.offset+2,g)}else if(">"===s)0!==u.length&&"blockquote"!==u[u.length-1]&&(n+=f(n)),0===u.length?(r[n]='<figure class="bq"><blockquote>',u.push("figure"),u.push("blockquote")):r[n]="<br>";else if("--"!==s&&"—"!==s||0===u.length||"blockquote"!==u[u.length-1])if("-"===s||"*"===s||"—"===s){if(0!==u.length&&"ol"!==u[u.length-1]&&"ul"!==u[u.length-1]&&(g=f(l),n+=g,l+=g),t>c||0===u.length){let e="";"*"!==s&&(e='class="list-dashed"'),r.splice(n,0,`<ul ${e}>`),++n,u.push("ul"),c=t}else if(t<c)r.splice(n,0,`</${u.pop()}>`),++n,c=t;else if("ol"===u[u.length-1]){let e="";"*"!==s&&(e='class="list-dashed"'),r.splice(n,0,`</${u.pop()}><ul ${e}">`),++n,u.push("ul")}r[n]="<li>",r.push("</li>");var d=C(r.slice(n+1));r.splice(n+1,r.length,...d),p(n)}else if(r.length>n&&".)".includes(r[n+1])&&null!==(a=((e,l)=>{let t;if(e.split("").every(e=>"ivxlcdm".includes(e)))t="lower-roman";else if(e.split("").every(e=>"IVXLCDM".includes(e)))t="upper-roman";else if(1===e.length&&65<=e.charCodeAt(0)&&e.charCodeAt(0)<=90)t="upper-latin";else if(1===e.length&&97<=e.charCodeAt(0)&&e.charCodeAt(0)<=122)t="lower-latin";else{if(!e.split("").every(e=>48<=e.charCodeAt(0)&&e.charCodeAt(0)<=57))return null;t="arabic"}if(")"===l)t+="-paren";else if("."!==l)return null;return t})(s.trimStart(),r[n+1]))){0!==u.length&&"ol"!==u[u.length-1]&&"ul"!==u[u.length-1]&&(d=f(l),n+=d,l+=d),(t+=s.length-s.trimStart().length)>c||0===u.length?(r.splice(n,0,`<ol class="${a}">`),++n,u.push("ol"),c=t):t<c?(r.splice(n,0,`</${u.pop()}>`),++n,c=t):"ul"===u[u.length-1]&&(r.splice(n,0,`</${u.pop()}><ol class="${a}">`),++n,u.push("ol")),r[n]="<li>",r.push("</li>"),r.splice(n+1,1);var v=C(r.slice(n+1));r.splice(n+1,r.length,...v),p(n)}else if(s.startsWith("---")&&r.slice(n).every(e=>e.split("").every(e=>"-"===e)))n+=f(n),r.splice(n,r.length,"<hr />");else{if(-1!==l&&1===e.length&&i+1!==h.length&&0===u.length){r.push("");continue}if(n+=f(n),"|"===r[n]){let l=r.slice(n),s=[];for(;0<l.length;){let e=[];for(;e.push(l.shift()),""!==e[e.length-1]&&0<l.length;);s.push(e.filter(e=>!e.split("").every(e=>" \t".includes(e))))}if(3<s.length&&s[1].join("").split("").every(e=>"|:-".includes(e))){var b=y(s[1]);if(null!==b){r.splice(n,r.length),r.push(`<table><thead><tr><th class="${b[0]}">`);for(let e=1,l=1;e<s[0].length-1;++e)"|"===s[0][e]?(r.push(`</th><th class="${b[l]}">`),++l):r.push(s[0][e]);r.push("</th></tr></thead><tbody>");for(let t=2;t<s.length;++t){r.push(`<tr><td class="${b[0]}">`);for(let e=1,l=1;e<s[t].length-1;++e)"|"===s[t][e]?(r.push(`</td><td class="${b[l]}">`),++l):r.push(s[t][e]);r.push("</td></tr>")}r.push("</tbody></table>");v=C(r.slice(n));r.splice(n,r.length,...v),p(n),r.push("\n");continue}}}r.splice(n,0,"<p>"),r.push("</p>");var $=C(r.slice(n));r.splice(n,r.length,...$),p(n)}else{r[n]=`</${u.pop()}><figcaption>`,r.push("</figcaption>");$=C(r.slice(n));r.splice(n,r.length,...$),p(n),f(r.length)}r.push("\n")}}}else r.push(e)}return r.join("")}document.addEventListener("DOMContentLoaded",async()=>{for(const i of document.querySelectorAll("pre.markdown"))if(!(!i instanceof HTMLElement)){let e,l=(e="src"in i.dataset?await fetch(i.dataset.src).then(e=>e.text()):i.textContent,document.createElement("div")),t=(l.classList+="card",document.createElement("div")),s=(t.classList+="card-body",l.appendChild(t),document.createElement("div"));s.classList+="markdown",t.appendChild(s);var n=h(e);s.innerHTML=r(n),i.parentNode.replaceChild(l,i)}});
